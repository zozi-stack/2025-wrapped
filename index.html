<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Op. 2025 — The Year of the Snake</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,500;0,600;1,400;1,500;1,600&family=David+Libre:wght@400;500;700&display=swap" rel="stylesheet">
  <style>
    @font-face {
      font-family: 'TRJN DaVinci';
      src: url('fonts/TRJNDaVinci-Medium.woff2') format('woff2'),
           url('fonts/TRJNDaVinci-Medium.woff') format('woff');
      font-weight: 500;
      font-style: normal;
    }
    @font-face {
      font-family: 'TRJN DaVinci';
      src: url('fonts/TRJNDaVinci-MediumItalic.woff2') format('woff2'),
           url('fonts/TRJNDaVinci-MediumItalic.woff') format('woff');
      font-weight: 500;
      font-style: italic;
    }
    @font-face {
      font-family: 'TRJN DaVinci';
      src: url('fonts/TRJNDaVinci-Italic.woff2') format('woff2'),
           url('fonts/TRJNDaVinci-Italic.woff') format('woff');
      font-weight: 400;
      font-style: italic;
    }
  </style>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- Zoom Modal -->
  <div class="zoom-modal" id="zoom-modal">
    <button class="zoom-close" id="zoom-close">×</button>
    <img src="" alt="" class="zoom-image" id="zoom-image">
  </div>

  <!-- Fixed Shadow Overlay -->
  <div class="shadow-overlay">
    <img src="https://www.figma.com/api/mcp/asset/768f33d1-f399-4be3-b3b8-18d9113f864e" alt="" class="shadow-img">
  </div>

  <!-- Fixed Navigation -->
  <nav class="toc">
    <h3 class="toc-title">Contents</h3>
    <ul class="toc-list">
      <li class="toc-item" data-section="sketches">No. 1. Sketches</li>
      <li class="toc-item" data-section="dates">No. 2. Dates</li>
      <li class="toc-item" data-section="books">No. 3. Books</li>
      <li class="toc-item" data-section="questions">No. 4. Questions</li>
      <li class="toc-item" data-section="lessons">No. 5. Lessons</li>
      <li class="toc-item" data-section="2026">No. 6. 2026</li>
    </ul>
  </nav>

  <!-- Scrolling Content (reversed order - scroll UP to progress) -->
  <main class="scroll-container">
    
    <!-- Section 8: 2026 -->
    <section class="section section-2026" id="2026">
      <div class="section-content">
        <!-- 2026 Symbol -->
        <div class="symbol-2026">
          <img src="images/2026 Symbol.png" alt="2026 Symbol">
        </div>
      </div>
    </section>

    <!-- Section 6: Lessons (with Reflective Writing and Birthday Polaroid above) -->
    <section class="section section-lessons" id="lessons">
      <div class="section-content lessons-container">
        <!-- Birthday Polaroid and Reflective Writing positioned above Lessons -->
        <div class="above-lessons">
          <div class="paper paper-polaroid fade-element">
            <img src="images/BirthdayPolaroids.png" alt="Birthday Polaroid" class="zoomable">
          </div>
          <a href="https://www.notion.so/2025-Journaling-2dd483bc998180a09c2dff0c7cf79cef?source=copy_link" target="_blank" class="paper paper-reflective fade-element">
            <img src="images/ReflectiveWriting.png" alt="Reflective Writing">
          </a>
        </div>
        <!-- Main Lessons paper -->
        <div class="paper paper-lessons fade-element">
          <img src="images/Lessons.png" alt="Lessons" class="zoomable">
        </div>
      </div>
    </section>

    <!-- Section 5: Questions -->
    <section class="section" id="questions">
      <div class="section-content">
        <div class="paper paper-questions">
          <img src="images/Questions.png" alt="Questions" class="zoomable">
        </div>
      </div>
    </section>

    <!-- Section 4: Piano -->
    <section class="section section-piano" id="piano">
      <div class="piano-container">
        <img src="images/piano/GlassEtudeNo.1.png" alt="Glass Etude No. 1" class="piano-1 zoomable">
        <img src="images/piano/Sonata.png" alt="Moonlight Sonata" class="piano-2 zoomable">
        <img src="images/piano/GlassEtudeNo.6.png" alt="Glass Etude No. 6" class="piano-3 zoomable">
        <img src="images/piano/Fly.png" alt="Fly" class="piano-4 zoomable">
      </div>
    </section>

    <!-- Section 3: Books -->
    <section class="section" id="books">
      <div class="section-content">
        <div class="paper paper-books">
          <img src="images/Books.png?v=2" alt="Books" class="zoomable">
        </div>
      </div>
    </section>

    <!-- Section 2: Dates -->
    <section class="section" id="dates">
      <div class="section-content">
        <div class="paper paper-dates">
          <img src="images/Dates.png" alt="Best Dates" class="zoomable">
        </div>
      </div>
    </section>

    <!-- Section 1: Sketches (9 months, reversed for scroll-up) -->
    <section class="section section-sketches" id="sketches">
      <div class="sketches-container">
        <div class="sketch-month">
          <img src="images/sketches/Sketches-Dec.png" alt="December Sketches" class="zoomable">
        </div>
        <div class="sketch-month">
          <img src="images/sketches/Sketches-Oct.png" alt="October Sketches" class="zoomable">
        </div>
        <div class="sketch-month">
          <img src="images/sketches/Sketches-Sep.png" alt="September Sketches" class="zoomable">
        </div>
        <div class="sketch-month">
          <img src="images/sketches/Sketches-Aug.png" alt="August Sketches" class="zoomable">
        </div>
        <div class="sketch-month">
          <img src="images/sketches/Sketches-June.png" alt="June Sketches" class="zoomable">
        </div>
        <div class="sketch-month">
          <img src="images/sketches/Sketches-May.png" alt="May Sketches" class="zoomable">
        </div>
        <div class="sketch-month">
          <img src="images/sketches/Sketches-April.png" alt="April Sketches" class="zoomable">
        </div>
        <div class="sketch-month">
          <img src="images/sketches/Sketches-Mar.png" alt="March Sketches" class="zoomable">
        </div>
        <div class="sketch-month">
          <img src="images/sketches/Sketches-PreJ.png" alt="Pre January Sketches" class="zoomable">
        </div>
      </div>
    </section>

    <!-- Title Section (starting point - at bottom) -->
    <section class="section section-title" id="title">
      <img src="images/snake-texture.png" alt="" class="snake-texture">
      <div class="title-content">
        <div class="title-caption">
          <h1 class="title-main">My <span class="year-italic">2025</span> Wrapped</h1>
          <div class="title-row">
            <span class="opus">The year of the snake</span>
            <span class="author">Zoe 郑</span>
          </div>
        </div>
      </div>
      <div class="scroll-hint">↑ scroll up to begin</div>
    </section>

  </main>

  <script>
    // Title letter animation (inspired by Artisans de Genève)
    function animateTitleLetters() {
      const titleMain = document.querySelector('.title-main');
      if (!titleMain) return;
      
      // Get the original HTML (to preserve the italic span)
      const originalHTML = titleMain.innerHTML;
      
      // Process text nodes and wrap letters
      function wrapLetters(element) {
        let letterIndex = 0;
        
        Array.from(element.childNodes).forEach(node => {
          if (node.nodeType === Node.TEXT_NODE) {
            const text = node.textContent;
            const fragment = document.createDocumentFragment();
            
            // Split by words first
            const words = text.split(/(\s+)/);
            words.forEach(word => {
              if (word.match(/^\s+$/)) {
                // Preserve whitespace
                fragment.appendChild(document.createTextNode(word));
              } else if (word.length > 0) {
                const wordSpan = document.createElement('span');
                wordSpan.className = 'word';
                
                // Wrap each letter
                word.split('').forEach(char => {
                  const letterSpan = document.createElement('span');
                  letterSpan.className = 'letter';
                  letterSpan.textContent = char;
                  letterSpan.style.transitionDelay = `${letterIndex * 0.04}s`;
                  wordSpan.appendChild(letterSpan);
                  letterIndex++;
                });
                
                fragment.appendChild(wordSpan);
              }
            });
            
            node.replaceWith(fragment);
          } else if (node.nodeType === Node.ELEMENT_NODE) {
            // For elements like <span class="year-italic">, process their content
            const innerText = node.textContent;
            node.innerHTML = '';
            
            const wordSpan = document.createElement('span');
            wordSpan.className = 'word';
            
            innerText.split('').forEach(char => {
              const letterSpan = document.createElement('span');
              letterSpan.className = 'letter';
              letterSpan.textContent = char;
              letterSpan.style.transitionDelay = `${letterIndex * 0.04}s`;
              wordSpan.appendChild(letterSpan);
              letterIndex++;
            });
            
            node.appendChild(wordSpan);
          }
        });
      }
      
      wrapLetters(titleMain);
      
      // Trigger animation after a brief delay
      setTimeout(() => {
        titleMain.classList.add('animate');
        // Also animate the title-content for subtitles
        const titleContent = document.querySelector('.title-content');
        if (titleContent) {
          titleContent.classList.add('animate');
        }
        // Also animate the section-title for scroll-hint
        const sectionTitle = document.querySelector('.section-title');
        if (sectionTitle) {
          sectionTitle.classList.add('animate');
        }
      }, 200);
    }
    
    // Scroll to bottom on load (start at title)
    function scrollToBottom() {
      const maxScroll = Math.max(
        document.body.scrollHeight,
        document.documentElement.scrollHeight
      );
      window.scrollTo(0, maxScroll);
    }
    
    // Immediate scroll
    scrollToBottom();
    
    // Also on load event with delays for safety
    window.addEventListener('load', () => {
      scrollToBottom();
      setTimeout(() => {
        scrollToBottom();
        setTimeout(animateTitleLetters, 100);
      }, 100);
      // Extra fallback for slow connections
      setTimeout(scrollToBottom, 500);
    });

    // TOC navigation
    const tocItems = document.querySelectorAll('.toc-item');
    const sections = document.querySelectorAll('.section:not(.section-title)');
    
    // Click navigation
    tocItems.forEach(item => {
      item.addEventListener('click', () => {
        const sectionId = item.dataset.section;
        const section = document.getElementById(sectionId);
        if (section) {
          section.scrollIntoView({ behavior: 'smooth' });
        }
      });
    });

    // Scroll detection - update active TOC item
    function updateActiveSection() {
      const windowHeight = window.innerHeight;
      let currentSection = null;
      
      sections.forEach(section => {
        const rect = section.getBoundingClientRect();
        
        // Check if this section is in view
        if (rect.top < windowHeight * 0.6 && rect.bottom > windowHeight * 0.4) {
          currentSection = section;
        }
      });
      
      if (currentSection) {
        const sectionId = currentSection.id;
        tocItems.forEach(item => {
          if (item.dataset.section === sectionId) {
            if (!item.classList.contains('active')) {
              tocItems.forEach(i => i.classList.remove('active'));
              item.classList.add('active');
            }
          }
        });
      } else {
        // If no section is active (at title), remove all active
        const titleSection = document.getElementById('title');
        const titleRect = titleSection.getBoundingClientRect();
        if (titleRect.top < windowHeight * 0.6 && titleRect.bottom > windowHeight * 0.4) {
          tocItems.forEach(i => i.classList.remove('active'));
        }
      }
    }
    
    window.addEventListener('scroll', updateActiveSection);
    setTimeout(updateActiveSection, 200);

    // Show TOC when title section is in view (fade in on page load)
    const toc = document.querySelector('.toc');
    const titleSection = document.getElementById('title');
    
    function updateTocVisibility() {
      if (titleSection) {
        const titleRect = titleSection.getBoundingClientRect();
        // Show TOC when title section is in view
        if (titleRect.top < window.innerHeight && titleRect.bottom > 0) {
          toc.classList.add('visible');
        }
      }
    }
    
    // Fade in TOC after title animation completes (1.5s delay)
    setTimeout(() => {
      toc.classList.add('visible');
    }, 1500);

    // Zoom modal functionality
    const zoomModal = document.getElementById('zoom-modal');
    const zoomImage = document.getElementById('zoom-image');
    const zoomClose = document.getElementById('zoom-close');
    const zoomables = document.querySelectorAll('.zoomable');

    zoomables.forEach(img => {
      img.addEventListener('click', (e) => {
        e.stopPropagation();
        zoomImage.src = img.src;
        zoomImage.alt = img.alt;
        zoomModal.classList.add('active');
        document.body.style.overflow = 'hidden';
      });
    });

    zoomClose.addEventListener('click', () => {
      zoomModal.classList.remove('active');
      document.body.style.overflow = '';
    });

    zoomModal.addEventListener('click', (e) => {
      if (e.target === zoomModal) {
        zoomModal.classList.remove('active');
        document.body.style.overflow = '';
      }
    });

    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && zoomModal.classList.contains('active')) {
        zoomModal.classList.remove('active');
        document.body.style.overflow = '';
      }
    });

    // Fade-in animation on scroll
    const fadeElements = document.querySelectorAll('.paper, .sketch-month, .symbol-2026');
    
    const fadeObserver = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('visible');
        }
      });
    }, {
      threshold: 0.2,
      rootMargin: '0px 0px -50px 0px'
    });

    fadeElements.forEach(el => fadeObserver.observe(el));
  </script>
</body>
</html>
